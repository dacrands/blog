<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.90050a1d13023b812a48.css">@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,700);code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:Open Sans,sans-serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.flex{display:flex}.flex--center{display:flex;justify-content:center}.flex--col{flex-direction:column}.cover{position:-webkit-sticky;position:sticky;top:30%;bottom:0;left:0}.rel{position:relative}.content{max-width:500px}.grid--aside{display:grid;grid-template-columns:220px 1fr;overflow:hidden}.navbar{background:#3150bf}.navbar a{display:block;margin:.5rem 1rem;color:#fefeff}.navbar ul{list-style:none;display:flex}.navbar li,.navbar ul{margin:0}.header{padding:2rem}.header h1{color:#3150bf;margin-bottom:1rem}.header h3{font-weight:100;margin-bottom:1rem}.header p{margin-bottom:.25rem;line-height:180%}.header a{background:#5f7ef0;color:#fff;text-decoration:none;padding:0 .2rem;-webkit-transition:all .2s ease;transition:all .2s ease}.header a:hover{text-decoration:underline;background:#3150bf}.header--flex{flex-grow:1;display:flex;flex-direction:column;justify-content:center;align-items:center}.aside__nav{background:#3150bf;position:fixed;max-width:220px;padding:1rem;overflow-y:scroll;-webkit-overflow-scrolling:touch;max-height:100vh;color:#fefeff}.aside__nav-title{margin-bottom:2rem;white-space:nowrap;border-bottom:1px solid #132463;padding-bottom:.5rem;display:block;color:#fefeff;text-decoration:none}.aside__nav-title h2{margin-bottom:.35rem}.aside__nav-title small{line-height:100%}.aside__nav-title:hover h2{text-decoration:underline}.aside__nav-link{font-size:14px;line-height:110%;display:block;margin-bottom:2rem;color:#fefeff;text-decoration:none;font-weight:700}.aside__nav-link p{margin-bottom:.1rem}.aside__nav-link small{font-weight:400;color:#9baef5}.aside__nav-link:hover{text-decoration:underline}.aside__nav-link:hover small{color:#fefeff}.footer{background:#141519;padding:1rem;margin-top:1rem;color:#3150bf}.footer small{display:block;font-size:70%}.footer ul{list-style:none;margin:0}.footer li{margin-bottom:.5rem}.footer .citation{color:#3150bf;-webkit-transition:all .2s ease;transition:all .2s ease}.footer .citation:hover{color:#fefeff}.footer__link{display:inline-block;color:#5f7ef0;text-decoration:none;-webkit-transition:all .2s ease;transition:all .2s ease}.footer__link:hover{color:#fefeff}.blog{max-width:600px;margin:0 auto;padding:0 1rem;font-family:Times New Roman,Times,serif}.blog p{font-size:105%;line-height:150%;margin-bottom:.75rem}.blog h1,.blog h2{color:#3150bf;margin:1.75rem 0}.blog h3{font-weight:400;margin:1.75rem 0}.blog__header{padding:2rem 0}.blog__header h3{color:#5f7ef0;font-weight:400}.blog__post blockquote{font-size:85%;width:80%;margin:20px auto;font-family:Open Sans;font-style:italic;color:#555;padding:1rem 2rem;border-left:8px solid #5f7ef0;line-height:1.6;position:relative;background:#ededed}.blog__post blockquote:before{font-family:Arial;content:"\201C";color:#9baef5;font-size:4em;position:absolute;left:5px;top:-15px}.blog__post blockquote:after{content:""}.blog__post blockquote span{display:block;color:#333;font-style:normal;font-weight:700;margin-top:1em}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}.pages{flex-grow:1;display:flex;flex-direction:column;align-items:center;padding:20px 50px;background:#eaebec}.pages__link{flex-grow:1;display:block;width:100%;max-width:450px;text-decoration:none;box-shadow:0 6px 12px -2px rgba(179,179,197,.25),0 4px 8px -4px rgba(0,0,0,.3),0 -2px 10px -2px rgba(0,0,0,.025);margin-bottom:2rem;border-radius:10px;background:#fafafa;color:rgba(0,0,0,.8);-webkit-transition:all .2s ease;transition:all .2s ease}.pages__link:hover{box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.pages__link-title{padding:1rem;background:rgba(232,234,241,.678431);border-top-left-radius:10px;border-top-right-radius:10px}.pages__link-title h4{margin-bottom:.25rem;color:#3150bf}.pages__link-title small{color:#6e717e;margin:0}.pages__link-desc{font-size:16px;margin:0;padding:1rem;max-width:350px}.pages__link-desc p{margin:0}@media (max-width:850px){.flex,.grid--aside{display:block}.pages{max-height:100%;overflow-y:auto;padding:1em}.aside__nav{position:relative;display:flex;overflow-y:auto;overflow-x:scroll;-webkit-overflow-scrolling:touch;max-width:100%}.aside__nav-title{margin-bottom:0;margin-right:2rem;align-self:center;border-bottom:none;border-right:1px solid #132463;padding-right:1rem}.aside__nav-link{display:inline-block;padding:1rem;margin-right:1rem;margin-bottom:0;min-width:200px}}</style><meta name="generator" content="Gatsby 2.15.28"/><title data-react-helmet="true">Revisiting Python Data Analysis: Part 2 | David Crandall</title><meta data-react-helmet="true" name="description" content="David Crandall&#x27;s portfolio and blog. David is a full-stack web developer with a passion
    for building things with React and Flask. He is located in the greater New York city area."/><meta data-react-helmet="true" property="og:title" content="Revisiting Python Data Analysis: Part 2"/><meta data-react-helmet="true" property="og:description" content="David Crandall&#x27;s portfolio and blog. David is a full-stack web developer with a passion
    for building things with React and Flask. He is located in the greater New York city area."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="dacrands"/><meta data-react-helmet="true" name="twitter:title" content="Revisiting Python Data Analysis: Part 2"/><meta data-react-helmet="true" name="twitter:description" content="David Crandall&#x27;s portfolio and blog. David is a full-stack web developer with a passion
    for building things with React and Flask. He is located in the greater New York city area."/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#3150bf"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8920850a18bc084341f1511bd37ff228"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8920850a18bc084341f1511bd37ff228"/><link as="script" rel="preload" href="/webpack-runtime-c5e36dbe4641e36add46.js"/><link as="script" rel="preload" href="/app-ef7581d213df1109cb18.js"/><link as="script" rel="preload" href="/styles-8ceb61402a0ed4d344fa.js"/><link as="script" rel="preload" href="/commons-1bf12bcde6d2af0a2be2.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-802922b1b4776b1f6a5b.js"/><link as="fetch" rel="preload" href="/page-data\blog\8-18-18\page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><main class="grid--aside"><aside class="aside"><nav class="aside__nav"><a class="aside__nav-title" href="/"><h2>Blog</h2><small>by David Crandall</small></a><a class="aside__nav-link" href="/blog/4-9-2020"><p>How to Learn Math Later in Life</p><small>April 09, 2020</small></a><a class="aside__nav-link" href="/blog/7-21-2019"><p>Let&#x27;s Talk Linked-Lists</p><small>July 21, 2019</small></a><a class="aside__nav-link" href="/blog/5-3-2019"><p>Diving into PHP and SQL</p><small>May 03, 2019</small></a><a class="aside__nav-link" href="/blog/1-6-2019"><p>Connect your SPA with your Back-end</p><small>January 06, 2019</small></a><a class="aside__nav-link" href="/blog/11-21-18"><p>How NOT to Create a Dropbox Clone</p><small>November 21, 2018</small></a><a class="aside__nav-link" href="/blog/10-7-2018"><p>Hide Your Keys, Folks (Part II)</p><small>October 07, 2018</small></a><a class="aside__nav-link" href="/blog/10-6-18"><p>Downloading SVGs FAST with Python</p><small>October 06, 2018</small></a><a class="aside__nav-link" href="/blog/9-27-18"><p>Hide your keys, folks (Part I)</p><small>September 27, 2018</small></a><a class="aside__nav-link" href="/blog/8-24-18"><p>NeXT Logo in HTML and CSS</p><small>August 24, 2018</small></a><a aria-current="page" class="aside__nav-link" style="color:#a8b1ce" href="/blog/8-18-18"><p>Revisiting Python Data Analysis: Part 2</p><small>August 18, 2018</small></a><a class="aside__nav-link" href="/blog/8-13-18"><p>MIT 6.00.1x Course Review</p><small>August 13, 2018</small></a><a class="aside__nav-link" href="/blog/8-11-18"><p>Revisiting Python Data Visualization</p><small>August 11, 2018</small></a><a class="aside__nav-link" href="/blog/8-09-18"><p>Styled Components</p><small>August 09, 2018</small></a><a class="aside__nav-link" href="/blog/8-06-18"><p>Learning to program</p><small>August 06, 2018</small></a><a class="aside__nav-link" href="/blog/8-05-18"><p>Hello World!</p><small>August 05, 2018</small></a></nav></aside><article class="blog"><header class="blog__header"><div class="container"><h1>Revisiting Python Data Analysis: Part 2</h1><h3>August 18, 2018</h3></div></header><div class="blog__post"><div class="blog__post-content"><p><img src="https://github.com/dacrands/ny_chemical_dependence/raw/master/agegraph.png" alt="Drug Line Chart"></p>
<p>You may find the dataset for this project <a href="https://catalog.data.gov/dataset/chemical-dependence-treatment-program-admissions-beginning-2007">here</a>. The data is titled <em>Chemical Dependence Treatment Program Admissions: Beginning 2007.</em> It was last updated 	March 4, 2015.</p>
<p>From the source:</p>
<blockquote>
<p>NYS Office of Alcoholism and Substance Abuse Services (OASAS) certified chemical dependence treatment programs report admissions of people served in programs throughout NYS. This dataset includes the number of admissions to NYS OASAS certified treatment programs aggregated by the program category, county of the program location, age group of client at admission, and the primary substance of abuse group. </p>
</blockquote>
<h2>Background</h2>
<hr>
<p>I was having a lot of fun visualizing data scraped from HTML tables, but had yet to really dive into a serious dataset. I was looking for a lot of data, and thought data.gov would have a lot of cool datasets to analyze. After doing some searching around, I came across the dataset used in this project. Given my background in psychology, particularly my work as a research assistant for a clinical psychology lab, this dataset was both familiar and interesting to me. Also, around the time of this project I was volunteering for one of the country's largest detox centers, so it was a rewarding experience to be doing both amateur research and clinical work related to substance abuse â€” I was essentially a full-stack psychologist.</p>
<p>Anyway, let's review how I made the graph pictured above.</p>
<p><em>(WARNING: I created this graph early in my coding journey. Some of the code may be a bit rough, but I will point out where I would have done things differently.)</em></p>
<!-- *(NOTE: The picture below is massive and will take awhile to load.)*

![Imgur](https://i.imgur.com/CpX0EId.png) -->
<h2>Imports</h2>
<p>First, we will import the usual suspects: </p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sb
<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt</code></pre></div>
<h2>Python and Excel</h2>
<hr>
<p>The data came in a <code class="language-text">.csv</code> file, but I converted it to <code class="language-text">.xlsx</code> for reasons I can't quite recall. Either way, let's open the Excel file:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">xlsfile <span class="token operator">=</span> pd<span class="token punctuation">.</span>ExcelFile<span class="token punctuation">(</span><span class="token string">r'../substance_copy.xlsx'</span><span class="token punctuation">)</span>
dframe <span class="token operator">=</span> xlsfile<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span></code></pre></div>
<p>Then let's get the sheet of interest, in this case the sheet named <code class="language-text">main</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">dframe <span class="token operator">=</span> xlsfile<span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">)</span></code></pre></div>
<h2>Some ugly stuff</h2>
<p>When I created these graphs, I was still quite a novice and was very much in a "just get it done" mindset. That said, to achieve the desired aesthetic for the graph I modified the <a href="https://matplotlib.org/3.2.1/tutorials/introductory/customizing.html#matplotlib-rcparams">matplotlib rcParams</a>, which are global to the matplotlib package.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># This is bad because `rcParams` are global!</span>
mpl<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'patch.force_edgecolor'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.facecolor'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'#3b3b49'</span></code></pre></div>
<p>A more appropriate solution is to use <code class="language-text">rcContext</code>, as noted in <a href="https://stackoverflow.com/questions/22792779/how-to-set-local-rcparams-or-rcparams-for-one-figure-in-matplotlib">this stackoverflow post</a>.</p>
<h2>Seaborn to the rescue</h2>
<p>As I said, this is one of my first programming projects, so please excuse the hard-coded color values. <a href="https://seaborn.pydata.org">Seaborn</a> makes your graphs look nice and has an intuitive API, as seen below:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">age_graph <span class="token operator">=</span> sb<span class="token punctuation">.</span>factorplot<span class="token punctuation">(</span>
        y<span class="token operator">=</span><span class="token string">"Admissions"</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">"age_num"</span><span class="token punctuation">,</span> data<span class="token operator">=</span>dframe<span class="token punctuation">,</span>
        size<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> aspect<span class="token operator">=</span><span class="token number">1.6</span><span class="token punctuation">,</span> capsize<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span>
        hue<span class="token operator">=</span><span class="token string">"Substance"</span><span class="token punctuation">,</span> legend<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        palette<span class="token operator">=</span>sb<span class="token punctuation">.</span>color_palette<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'#4286f4'</span><span class="token punctuation">,</span>
                                  <span class="token string">'#f4d442'</span><span class="token punctuation">,</span>
                                  <span class="token string">'#cb42f4'</span><span class="token punctuation">,</span>
                                  <span class="token string">'#42f498'</span><span class="token punctuation">,</span>
                                  <span class="token string">'#f4426b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>To get a cleaner aesthetic, I removed the spines by calling <code class="language-text">despine</code> and passing it <code class="language-text">left=True</code>, since the default arg for <code class="language-text">despine</code> is <code class="language-text">left=False</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># Despine defaults:</span>
<span class="token comment"># seaborn.despine(fig=None, ax=None, top=True, right=True, left=False, bottom=False, offset=None, trim=False)</span>

sb<span class="token punctuation">.</span>despine<span class="token punctuation">(</span>left<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></code></pre></div>
<p>Then to get that nice grid overlay, we call <code class="language-text">set_style</code> and tell it we want a  <code class="language-text">&quot;whitegrid&quot;</code>:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">sb<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">"whitegrid"</span><span class="token punctuation">)</span></code></pre></div>
<h2>Fine tune with <code class="language-text">pyplot</code></h2>
<p>To customize the plot even further, we'll access the plot directly. Of course, there may be a way to add this customization with Seaborn, but when I made this in 2017 access the plot directly seemed easier. I won't add too much commentary on the following since it's pretty self explanatory.</p>
<h3>Set the title</h3>
<p>You'll note an escape character, <code class="language-text">\n</code>, to ensure the title fit on the graph:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span>
    <span class="token string">"NY State Chemical Dependence\nTreatment Program Admissions 2007-2015"</span><span class="token punctuation">,</span> 
    fontsize<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">,</span> 
    color<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">,</span> 
    fontweight<span class="token operator">=</span><span class="token string">"heavy"</span><span class="token punctuation">,</span> 
    y<span class="token operator">=</span><span class="token number">1.04</span>
<span class="token punctuation">)</span></code></pre></div>
<h3>Set the legend</h3>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>
    bbox_to_anchor<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">.01</span><span class="token punctuation">,</span> <span class="token number">0.98</span><span class="token punctuation">)</span><span class="token punctuation">,</span> loc<span class="token operator">=</span><span class="token string">'upper left'</span><span class="token punctuation">,</span>
    ncol<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span>
    frameon<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> shadow<span class="token operator">=</span><span class="token boolean">True</span>
<span class="token punctuation">)</span></code></pre></div>
<h3>Set the labels</h3>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"Annual average\nper country"</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"Age"</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">22</span><span class="token punctuation">)</span></code></pre></div>
<h3>Set the axis ticks</h3>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           <span class="token punctuation">[</span><span class="token string">'&lt;18'</span><span class="token punctuation">,</span> <span class="token string">'18-24'</span><span class="token punctuation">,</span> <span class="token string">'25-34'</span><span class="token punctuation">,</span> <span class="token string">'35-44'</span><span class="token punctuation">,</span> <span class="token string">'45-54'</span><span class="token punctuation">,</span> <span class="token string">'55+'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
           fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'bold'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span> fontweight<span class="token operator">=</span><span class="token string">'bold'</span><span class="token punctuation">)</span></code></pre></div>
<h3>Set custom text</h3>
<p>I will use <code class="language-text">plt.text</code> to show how many total admissions there are for this dataset, essentially our sample size.</p>
<p>First, we will get the total number of admissions and cast it as a string to make formatting a bit easier:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">admissions <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">(</span>dframe<span class="token punctuation">[</span><span class="token string">'Admissions'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>
    <span class="token operator">-</span><span class="token number">0.23</span><span class="token punctuation">,</span> 
    <span class="token number">115</span><span class="token punctuation">,</span> 
    <span class="token string">"Total Admissions = {0},{1},{2}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>admissions<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                            admissions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                            admissions<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                            admissions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        fontsize<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">,</span> 
        color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span> 
        fontweight<span class="token operator">=</span><span class="token string">"medium"</span><span class="token punctuation">,</span> 
        fontstyle<span class="token operator">=</span><span class="token string">"italic"</span>
<span class="token punctuation">)</span></code></pre></div>
<h2>Save the graph</h2>
<p>Ah yes, so after all that we may now save the graph:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">age_graph<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'agegraph.png'</span><span class="token punctuation">)</span></code></pre></div>
<h2>Conclusion</h2>
<p>This was a nice trip back to one of my first programming projects. Admittedly the code wasn't the greatest, but I am happy with how the graph came out. Visualizing data with Python will always have a special place in my heart</p></div></div></article></main></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-127816565-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/8-18-18";window.webpackCompilationHash="6492dc12a3182a078980";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-ef7581d213df1109cb18.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-802922b1b4776b1f6a5b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-e59d4dd650a42cbc754f.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-862bf17b8e9b3fb19c5c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-44bf1c80407941ced224.js"],"component---src-pages-success-js":["/component---src-pages-success-js-d1b89c045a48e86853ae.js"]};/*]]>*/</script><script src="/component---src-templates-blog-template-js-802922b1b4776b1f6a5b.js" async=""></script><script src="/commons-1bf12bcde6d2af0a2be2.js" async=""></script><script src="/styles-8ceb61402a0ed4d344fa.js" async=""></script><script src="/app-ef7581d213df1109cb18.js" async=""></script><script src="/webpack-runtime-c5e36dbe4641e36add46.js" async=""></script></body></html>