<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.a2f933b7ab5f58f2ecfb.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style data-href="/component---src-templates-blog-template-js.aa347048600e835767d0.css">@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,700);html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:Open Sans,sans-serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.flex-center{display:flex;justify-content:center;align-items:center}.content{max-width:500px}.grid--aside{display:grid;grid-template-columns:220px 1fr;overflow:hidden}.navbar{background:#3150bf}.navbar a{display:block;margin:.5rem 1rem;color:#fefeff}.navbar ul{list-style:none;display:flex}.navbar li,.navbar ul{margin:0}.footer{background:#141519;padding:1rem;margin-top:1rem;color:#3150bf}.footer small{display:block;font-size:70%}.footer ul{list-style:none;margin:0}.footer li{margin-bottom:.5rem}.footer .citation{color:#3150bf;transition:all .2s ease}.footer .citation:hover{color:#fefeff}.footer__link{display:inline-block;color:#5f7ef0;text-decoration:none;transition:all .2s ease}.footer__link:hover{color:#fefeff}.header{padding:2rem}.header h1{color:#3150bf;margin-bottom:1rem}.header h3{font-weight:100;margin-bottom:1rem}.header p{margin-bottom:.25rem;line-height:180%}.header a{background:#5f7ef0;color:#fff;text-decoration:none;padding:0 .2rem;transition:all .2s ease}.header a:hover{text-decoration:underline;background:#3150bf}.header--flex{justify-content:center}.header--flex,.pages{flex-grow:1;display:flex;flex-direction:column;align-items:center}.pages{overflow-y:scroll;max-height:100vh;padding:20px 50px;background:#eaebec}.pages ::-webkit-scrollbar-thumb{background-color:#3150bf}.pages__link{flex-grow:1;display:block;width:100%;max-width:450px;text-decoration:none;box-shadow:0 6px 12px -2px rgba(179,179,197,.25),0 4px 8px -4px rgba(0,0,0,.3),0 -2px 10px -2px rgba(0,0,0,.025);margin-bottom:2rem;border-radius:10px;background:#fafafa;color:rgba(0,0,0,.8);transition:all .2s ease}.pages__link:hover{box-shadow:0 13px 27px -5px rgba(50,50,93,.25),0 8px 16px -8px rgba(0,0,0,.3),0 -6px 16px -6px rgba(0,0,0,.025)}.pages__link-title{padding:1rem;background:rgba(232,234,241,.68);border-top-left-radius:10px;border-top-right-radius:10px}.pages__link-title h4{margin-bottom:.25rem;color:#3150bf}.pages__link-title small{color:#6e717e;margin:0}.pages__link-desc{font-size:16px;margin:0;padding:1rem;max-width:350px}.pages__link-desc p{margin:0}.aside__nav{background:#3150bf;position:fixed;max-width:220px;padding:1rem;overflow-y:scroll;-webkit-overflow-scrolling:touch;max-height:100vh;color:#fefeff}.aside__nav-title{margin-bottom:2rem;white-space:nowrap;border-bottom:1px solid #132463;padding-bottom:.5rem;display:block;color:#fefeff;text-decoration:none}.aside__nav-title h2{margin-bottom:.35rem}.aside__nav-title small{line-height:100%}.aside__nav-title:hover h2{text-decoration:underline}.aside__nav-link{font-size:14px;line-height:110%;display:block;margin-bottom:2rem;color:#fefeff;text-decoration:none;font-weight:700}.aside__nav-link p{margin-bottom:.1rem}.aside__nav-link small{font-weight:400;color:#9baef5}.aside__nav-link:hover{text-decoration:underline}.aside__nav-link:hover small{color:#fefeff}.blog{max-width:600px;margin:0 auto;padding:0 1rem;font-family:Times New Roman,Times,serif}.blog h1,.blog h2{color:#3150bf}.blog h3{font-weight:400}.blog__header{padding:2rem 0}.blog__header h3{color:#5f7ef0;font-weight:400}.blog__post blockquote{font-size:85%;width:80%;margin:20px auto;font-family:Open Sans;font-style:italic;color:#555;padding:1rem 2rem;border-left:8px solid #5f7ef0;line-height:1.6;position:relative;background:#ededed}.blog__post blockquote:before{font-family:Arial;content:"\201C";color:#9baef5;font-size:4em;position:absolute;left:5px;top:-15px}.blog__post blockquote:after{content:""}.blog__post blockquote span{display:block;color:#333;font-style:normal;font-weight:700;margin-top:1em}@media (max-width:850px){.flex-center,.grid--aside{display:block}.pages{max-height:100%;overflow-y:auto;padding:1em}.aside__nav{position:relative;display:flex;overflow-y:auto;overflow-x:scroll;-webkit-overflow-scrolling:touch;max-width:100%}.aside__nav-title{margin-bottom:0;margin-right:2rem;align-self:center;border-bottom:none;border-right:1px solid #132463;padding-right:1rem}.aside__nav-link{display:inline-block;padding:1rem;margin-right:1rem;margin-bottom:0;min-width:200px}}</style><meta name="generator" content="Gatsby 2.0.76"/><title data-react-helmet="true"></title><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#042291"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-3049fdd10cc4dd8ba44a.js"/><link as="script" rel="preload" href="/app-064b92199f8e4e2c99fe.js"/><link as="script" rel="preload" href="/webpack-runtime-f19aaab9ee67e5f5ea46.js"/><link as="fetch" rel="preload" href="/static/d/979/path---blog-5-3-2019-bd-8-a9c-sz1gLJx9wLcHmFa9CDdBLUOVmw.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><main class="grid--aside"><aside class="aside"><nav class="aside__nav"><a class="aside__nav-title" href="/"><h2>Blog</h2><small>by David Crandall</small></a><a aria-current="page" class="aside__nav-link" style="color:#a8b1ce" href="/blog/5-3-2019"><p>Diving into PHP and SQL</p><small>May 03, 2019</small></a><a class="aside__nav-link" href="/blog/4-2-2019"><p>My First Technical Interview! Part 1: The Phoner</p><small>April 02, 2019</small></a><a class="aside__nav-link" href="/blog/1-6-2019"><p>Connect your SPA with your Back-end</p><small>January 06, 2019</small></a><a class="aside__nav-link" href="/blog/11-21-18"><p>How NOT to Create a Dropbox Clone</p><small>November 21, 2018</small></a><a class="aside__nav-link" href="/blog/10-7-2018"><p>Hide Your Keys, Folks (Part II)</p><small>October 07, 2018</small></a><a class="aside__nav-link" href="/blog/10-6-18"><p>Downloading SVGs FAST with Python</p><small>October 06, 2018</small></a><a class="aside__nav-link" href="/blog/9-27-18"><p>Hide your keys, folks (Part I)</p><small>September 27, 2018</small></a><a class="aside__nav-link" href="/blog/8-24-18"><p>NeXT Logo in HTML and CSS</p><small>August 24, 2018</small></a><a class="aside__nav-link" href="/blog/8-18-18"><p>Revisiting Python Data Analysis: Part 2</p><small>August 18, 2018</small></a><a class="aside__nav-link" href="/blog/8-13-18"><p>MIT 6.00.1x Course Review</p><small>August 13, 2018</small></a><a class="aside__nav-link" href="/blog/8-11-18"><p>Revisiting Python Data Visualizationd</p><small>August 11, 2018</small></a><a class="aside__nav-link" href="/blog/8-09-18"><p>Styled Components</p><small>August 09, 2018</small></a><a class="aside__nav-link" href="/blog/8-06-18"><p>Learning to program</p><small>August 06, 2018</small></a><a class="aside__nav-link" href="/blog/8-05-18"><p>Hello World!</p><small>August 05, 2018</small></a></nav></aside><article class="blog"><header class="blog__header"><div class="container"><h1>Diving into PHP and SQL</h1><h3>May 03, 2019</h3></div></header><div class="blog__post"><div class="blog__post-content"><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/PHP-logo.svg/1280px-PHP-logo.svg.png" alt="php logo"></p>
<p>Ah yes, the ever-so controversial PHP. When I was initially getting into web development PHP was one of the first things I considered learning, though this was soon abandoned after somehow developing — through sites like reddit no doubt — a perception of php as dated and, well, bad.</p>
<p>However, those were the perceptions of a naive programmer — quickly rushing to judgment on a technology one has no experience with.</p>
<p> And while PHP certainly has its share of memes and haters, a more accurate interpretation of the communities perception towards the language would be thus:</p>
<blockquote>
<p>PHP has a bad reputation because a lot of inexperienced programmers built crappy things with it. However, if you follow best-practice, it is an extremely powerful tool for building websites.   </p>
</blockquote>
<p>Anyway, let's get to some code and uncover the enigma that is PHP!</p>
<h2>Configuring PHP</h2>
<p>Here's the tutorial I used to configure PHP on Mojave OS: <a href="https://discussions.apple.com/docs/DOC-13841">Setting up a local web server on macOS 10.14 “Mojave”</a></p>
<p>I decided to use my MacBook Pro for this since Apple computers come with PHP already installed, the trick is you need to activate it.</p>
<p>This means manipulating the <code class="language-text">/etc/apache2/httpd.conf</code> file, which if done improperly can destroy your machine, so make sure you follow the directions in tutorial linked above to the <code class="language-text">#</code>!</p>
<h2>The Project</h2>
<p>Here is the github repo to what we are building: <a href="https://github.com/dacrands/php-mysql-practice">php-mysql repo</a>.</p>
<p>After going through the tutorial linked above, you should know where your PHP files are being served from on your machine. It is likely from a directory located at <code class="language-text">/Users/&lt;username&gt;/Sites/</code> and can be accessed in your browser via <code class="language-text">http://localhost/~&lt;username&gt;</code></p>
<p>We're going to make a little form that sign's a user up to a MySQL database. Create a directory <em>php-form</em> in your <em>Sites</em> folder and add the following files:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">/php-form
    header.php
    form.php
    sql.php</code></pre></div>
<br/>
<h2>form.php</h2>
<p>Open <code class="language-text">form.php</code> and add the following code:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">include</span> <span class="token single-quoted-string string">'header.php'</span> <span class="token delimiter important">?></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jumbotron<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>display-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Sign up<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lead<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Join us as we explore PHP and SQL!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sql.php<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
                Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
                Password: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-primary<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Sign Up<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<br />
<p>Everything inside <code class="language-text">&lt;?php ?&gt;</code> is PHP code, so you may notice only one line of PHP here used to import our header file. That's what makes PHP so interesting. This is a <em>.php</em> file, yet it's essentially all HTML. And though we will soon see that PHP has much more powerful functionality than allowing HTML in our files, this just demonstrates that PHP is a language for websites.</p>
<!-- When you navigate to `http://localhost/~<username>/php-form/form.php` you should see the sign-up page.  -->
<p>Now let's open our <em>header.php</em> and see another another interesting way in which PHP interacts with HTML.</p>
<h2>header.php</h2>
<p>Add the following code to <em>header.php</em>:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">echo</span> <span class="token single-quoted-string string">'
&lt;!DOCTYPE html> 
&lt;html lang="en"> 
&lt;head> 
    &lt;meta charset="UTF-8"> 
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"> 
    &lt;title>Sign Up&lt;/title> 
    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
&lt;/head>
'</span>
<span class="token delimiter important">?></span></span></code></pre></div>
<br />
<p>After you save, refresh the browser and you should see a simple sign-up page with some Bootstrap stylings.</p>
<p>As I mentioned above, <strong>everything</strong> inside of <code class="language-text">&lt;?php ... ?&gt;</code> is PHP code. In this example, we are using the <em>echo</em> function to <strong>generate</strong> HTML. </p>
<p>I didn't add a <em>footer.php</em>, so that I suggest you try adding it now. </p>
<h2>sql.php</h2>
<p>Before getting started, you will need a MySQL db to connect to. If you are not familiar with MySQL/don't have it installed, I suggest you work through their documentation before moving forward: <a href="https://dev.mysql.com/doc/mysql-getting-started/en/">Getting Started with MySQL</a></p>
<p>Okay, now we are really going to get a taste of what PHP can do. I am going to show the entire file first, then we will break it down:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">include</span> <span class="token single-quoted-string string">'header.php'</span> <span class="token delimiter important">?></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>jumbotron<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>display-3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Registration<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>lead<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Join us as we explore PHP and SQL!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span>
        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> 
            <span class="token comment">// Connect to DB</span>
            <span class="token variable">$config</span> <span class="token operator">=</span> <span class="token function">parse_ini_file</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"../../../private/config.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$host</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"127.0.0.1"</span><span class="token punctuation">;</span>
            <span class="token variable">$mysqli</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">,</span> <span class="token variable">$config</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"username"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$config</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"menagerie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysqli_connect_errno</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Failed to connect to MySQL: "</span> <span class="token punctuation">.</span> <span class="token function">mysql_connect_errno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// Check if user table exists</span>
            <span class="token comment">// TODO find the right way to do this</span>
            <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"SELECT * FROM user"</span><span class="token punctuation">;</span>
            <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Create user table  if it doesn't exist</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
                <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span>
                    <span class="token variable">$mysqli</span><span class="token punctuation">,</span> 
                    <span class="token double-quoted-string string">"CREATE TABLE user (name VARCHAR(20), password VARCHAR(60))"</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// User sign up</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">TRUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
                    <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token function">password_hash</span><span class="token punctuation">(</span>
                        <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token constant">PASSWORD_BCRYPT</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>  
                    <span class="token comment">// Make sure form fields aren't empty</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Missing form data &lt;br/>"</span><span class="token punctuation">;</span>        
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// Check if user exists already</span>
                    <span class="token variable">$name_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"SELECT * FROM user WHERE name='<span class="token interpolation"><span class="token variable">$name</span></span>';"</span><span class="token punctuation">;</span>
                    <span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$name_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$name_res</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">num_rows</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">echo</span> <span class="token double-quoted-string string">"That user exists &lt;br/>"</span><span class="token punctuation">;</span>      
                        <span class="token keyword">break</span><span class="token punctuation">;</span>  
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token comment">// Sign the user up            </span>
                        <span class="token variable">$new_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"INSERT INTO user (name, password) VALUES ('<span class="token interpolation"><span class="token variable">$name</span></span>', '<span class="token interpolation"><span class="token variable">$password</span></span>')"</span><span class="token punctuation">;</span>
                        <span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$new_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">echo</span>  <span class="token double-quoted-string string">"User Successfully signed up &lt;br/>"</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>      
                <span class="token punctuation">}</span> 
            <span class="token punctuation">}</span> 
        <span class="token delimiter important">?></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form.php<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Go back<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<br />
<h3>db logic</h3>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$config</span> <span class="token operator">=</span> <span class="token function">parse_ini_file</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"../../../private/config.ini"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$host</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"127.0.0.1"</span><span class="token punctuation">;</span>
<span class="token comment">/*
 mysqli_connect("127.0.0.1", "my_user", "my_password", "my_db"); 
*/</span>
<span class="token variable">$mysqli</span> <span class="token operator">=</span> <span class="token function">mysqli_connect</span><span class="token punctuation">(</span><span class="token variable">$host</span><span class="token punctuation">,</span> <span class="token variable">$config</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"username"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$config</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"menagerie"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<br />
<p>In php <code class="language-text">$</code> is used to declare variables. Here I am using the built-in function <code class="language-text">parse_ini_file()</code> to parse a <em>config.ini</em> file, though for practice purposes on your local machine you just pass the raw strings. </p>
<p>Let's check to make sure the connection was succesful:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysqli_connect_errno</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Failed to connect to MySQL: "</span> <span class="token punctuation">.</span> <span class="token function">mysql_connect_errno</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div>
<br />
<p><code class="language-text">mysqli_connect_errno</code> returns the following, from the docs:</p>
<blockquote>
<p>An error code value for the last call to mysqli_connect(), if it failed. zero means no error occurred. </p>
</blockquote>
<p>Like Python and JavaScript, <code class="language-text">0</code> is falsey in PHP.</p>
<ul>
<li>When routed to, <em>sql.php</em> connects to a MySQL database. </li>
<li>When a user submits a post, <em>sql.php</em> uses the string function <code class="language-text">htmlspecialchars()</code> to remove potentially malicious code from the form data. It will also verify that the form data is not empty.</li>
<li></li>
</ul>
<h3>Check if user table exists</h3>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"SELECT * FROM user"</span><span class="token punctuation">;</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create user table  if it doesn't exist</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span>
        <span class="token variable">$mysqli</span><span class="token punctuation">,</span> 
        <span class="token double-quoted-string string">"CREATE TABLE user (name VARCHAR(20), password VARCHAR(60))"</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<br />
<p>So I am almost positive this is not the proper way to do this, but it is a temporary solution to see if our user table exists. </p>
<p>We are using <code class="language-text">mysqli_query()</code> to pass queries to our db object. If there is not a user table, <em>$res</em> will return a falsely value — if there is no user table, we will create one.</p>
<h3>POST Logic</h3>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">TRUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$password</span> <span class="token operator">=</span> <span class="token function">password_hash</span><span class="token punctuation">(</span>
            <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">PASSWORD_BCRYPT</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token comment">// Make sure form fields aren't empty</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$password</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">echo</span> <span class="token double-quoted-string string">"Missing form data &lt;br/>"</span><span class="token punctuation">;</span>        
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// Check if user exists already</span>
        <span class="token variable">$name_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"SELECT * FROM user WHERE name='<span class="token interpolation"><span class="token variable">$name</span></span>';"</span><span class="token punctuation">;</span>
        <span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$name_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$name_res</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">num_rows</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">echo</span> <span class="token double-quoted-string string">"That user exists &lt;br/>"</span><span class="token punctuation">;</span>      
            <span class="token keyword">break</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// Sign the user up            </span>
            <span class="token variable">$new_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"INSERT INTO user (name, password) VALUES ('<span class="token interpolation"><span class="token variable">$name</span></span>', '<span class="token interpolation"><span class="token variable">$password</span></span>')"</span><span class="token punctuation">;</span>
            <span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$new_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">echo</span>  <span class="token double-quoted-string string">"User Successfully signed up &lt;br/>"</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>      
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> </code></pre></div>
<br />
<h3>$_POST</h3>
<p>First, let's talk a little bit about <em>$_POST</em>. Here is it's description from the <a href="https://www.php.net/manual/en/reserved.variables.post.php">PHP documentation</a>:</p>
<blockquote>
<p>[ $_POST ] is an associative array of variables passed to the current script via the HTTP POST method when using application/x-www-form-urlencoded or multipart/form-data as the HTTP Content-Type in the request.</p>
</blockquote>
<p>You can think of an <a href="https://www.php.net/manual/en/language.types.array.php">associative array</a> as a dictionary, object, hash-table, etc. Basically an implementation of key-value mapping. Thus, to get the values from our post, we can pass a key to <em>$_POST</em> (e.g., <code class="language-text">$_POST[&quot;name&quot;]</code>).</p>
<p>Furthermore, <em>$_POST</em> is what is known as a <em>superglobal</em>, which is defined the in the docs as the following:</p>
<blockquote>
<p>[ $_POST ] is a 'superglobal', or automatic global, variable. This simply means that it is available in all scopes throughout a script. There is no need to do global $variable; to access it within functions or methods.</p>
</blockquote>
<p>Here is a list of the PHP Superglobals: <a href="https://www.php.net/manual/en/language.variables.superglobals.php">PHP Superglobal list</a></p>
<p>Once we submit a <em>post</em> to <em>sql.php</em>, we'll enter our <code class="language-text">if ($_POST)</code> block, and thus our <code class="language-text">while (TRUE)</code> loop, where we'll make use of some more powerful built-in PHP functions.</p>
<h3>htmlspecialchars()</h3>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<br />
<p>Remember how easily we generated HTML using PHP in our header file? Well, it's okay if <em>we</em> are generating HTML, but we don't want the user to generate HTML, which may include malicious scripts via <code class="language-text">&lt;script&gt;</code> elements. What <em>htmlspecialchars()</em> does is convert things meaningful to HTML, such as <em>></em>, <em>&#x3C;</em> symbols, into their <a href="https://www.w3.org/TR/html4/intro/sgmltut.html#h-3.2.3">character reference</a>, (e.g., &#x26; to &#x26;amp;).</p>
<h3>password_hash()</h3>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$password</span> <span class="token operator">=</span> <span class="token function">password_hash</span><span class="token punctuation">(</span>
            <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token double-quoted-string string">"password"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">PASSWORD_BCRYPT</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>  </code></pre></div>
<br/>
<p>Now that our user input is clean, we'll need to hash our password. And, you guessed it, PHP has a built-in function for that: <a href="https://php.net/manual/en/function.password-hash.php">password_hash()</a>. From the docs:</p>
<blockquote>
<p><strong>password_hash()</strong> creates a new password hash using a strong one-way hashing algorithm. <strong>password_hash()</strong> is compatible with <strong>crypt()</strong>. Therefore, password hashes created by <strong>crypt()</strong> can be used with <strong>password_hash()</strong>.</p>
</blockquote>
<p>We'll use <em>bcrypt</em> for security purposes.</p>
<h3>MySQL</h3>
<p>After some simple validation to make sure the post values aren't empty, we can add the user to the db. Of course, we don't want to add a user if that user's name is already in the user table, so let's check to make sure that does not happen:</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token variable">$name_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"SELECT * FROM user WHERE name='<span class="token interpolation"><span class="token variable">$name</span></span>';"</span><span class="token punctuation">;</span>
<span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$name_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$name_res</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">num_rows</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token double-quoted-string string">"That user exists &lt;br/>"</span><span class="token punctuation">;</span>      
    <span class="token keyword">break</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre></div>
<br/>
<p>One that about declaring all variables with <code class="language-text">$</code> is that it makes string formatting really easy, as you can see from line 1 above.</p>
<p>Inside the <em>if</em> statement above, you'll see <code class="language-text">$name_res-&gt;num_rows</code>. What's happening here is <code class="language-text">-&gt;</code> accesses the value of <code class="language-text">num_rows</code>, which is a property of <code class="language-text">$name_res</code>. If a user exists with the same name as the person currently signing up, the number of rows will be greater than 0, viz., 1 row. If that's the case, we will break out of our <em>while(TRUE)</em> loop.</p>
<p>Now we can finally sign the user up.</p>
<div class="gatsby-highlight" data-language="php"><pre class="language-php"><code class="language-php"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token variable">$new_query</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"INSERT INTO user (name, password) VALUES ('<span class="token interpolation"><span class="token variable">$name</span></span>', '<span class="token interpolation"><span class="token variable">$password</span></span>')"</span><span class="token punctuation">;</span>
    <span class="token variable">$name_res</span> <span class="token operator">=</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$mysqli</span><span class="token punctuation">,</span> <span class="token variable">$new_query</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">echo</span>  <span class="token double-quoted-string string">"User Successfully signed up &lt;br/>"</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> </code></pre></div>
<br/>
<p>And that's about as far as I got with my little trip to PHP.</p>
<h2>Final Thoughts</h2>
<p>PHP seems pretty cool for building things. The number of things you can do without including an external library is really impressive. Some things would take some getting used to, such as the fact that all variables are global. But otherwise, it's I'm glad I didn't buy into the memes and explored PHP.</p></div></div></article></main></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-template-js","jsonName":"blog-5-3-2019-bd8","path":"/blog/5-3-2019"};window.dataPath="979/path---blog-5-3-2019-bd-8-a9c-sz1gLJx9wLcHmFa9CDdBLUOVmw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.a2f933b7ab5f58f2ecfb.css","/app-064b92199f8e4e2c99fe.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js.aa347048600e835767d0.css","/component---src-templates-blog-template-js-3049fdd10cc4dd8ba44a.js"],"component---src-pages-404-js":["/component---src-pages-404-js.aa347048600e835767d0.css","/component---src-pages-404-js-3bfb54c6a51ef8a8e336.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js.aa347048600e835767d0.css","/component---src-pages-blog-js-c6ab05dd79641c0f25ab.js"],"component---src-pages-index-js":["/component---src-pages-index-js.aa347048600e835767d0.css","/component---src-pages-index-js-5f2a5cdc3f58f27fa43e.js"],"component---src-pages-success-js":["/component---src-pages-success-js.aa347048600e835767d0.css","/component---src-pages-success-js-736897c6ff9af9823396.js"],"pages-manifest":["/pages-manifest-6bdf959e13424007fcb3.js"]};/*]]>*/</script><script src="/webpack-runtime-f19aaab9ee67e5f5ea46.js" async=""></script><script src="/app-064b92199f8e4e2c99fe.js" async=""></script><script src="/component---src-templates-blog-template-js-3049fdd10cc4dd8ba44a.js" async=""></script></body></html>